<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÄ‡∏£‡∏≤ | SWG. SHOP</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        .contact-section {
            padding: 60px 0;
            background: #f4f4f4;
        }
        .contact-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            align-items: center;
        }
        .contact-info h2 {
            font-size: 2rem;
            margin-bottom: 30px;
        }
        .contact-item {
            margin-bottom: 25px;
            display: flex;
            gap: 15px;
        }
        .contact-item-icon {
            font-size: 1.5rem;
            min-width: 30px;
        }
        .contact-item-text h3 {
            margin-bottom: 5px;
            font-size: 1.1rem;
        }
        .contact-item-text p {
            color: #666;
        }
        .contact-form {
            background: #fff;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }
        .form-group {
            margin-bottom: 20px;
        }
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
        }
        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 10px 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-family: 'Kanit', sans-serif;
            font-size: 1rem;
        }
        .form-group textarea {
            resize: vertical;
            min-height: 120px;
        }
        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #ff4b2b;
            box-shadow: 0 0 5px rgba(255, 75, 43, 0.3);
        }
        .submit-btn {
            width: 100%;
            padding: 12px;
            background: #ff4b2b;
            color: #fff;
            border: none;
            border-radius: 5px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s;
        }
        .submit-btn:hover {
            background: #ff3d1f;
        }
        @media (max-width: 768px) {
            .contact-container {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>

    <header>
        <div class="container nav-container">
            <div class="logo">SWG.<span>SHOP</span></div>
            <nav>
                <ul>
                    <li><a href="index.html">‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</a></li>
                    <li><a href="collection.html">‡∏Ñ‡∏≠‡∏•‡πÄ‡∏•‡∏Ñ‡∏ä‡∏±‡∏ô</a></li>
                    <li><a href="best-seller.html">‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ç‡∏≤‡∏¢‡∏î‡∏µ</a></li>
                    <li><a href="contact.html" class="active">‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÄ‡∏£‡∏≤</a></li>
                    <li><a href="cart-page.html">üõí ‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <section class="contact-section">
        <div class="container">
            <h1 style="text-align: center; margin-bottom: 50px; font-size: 2.5rem;">‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÄ‡∏£‡∏≤ üìû</h1>
            
            <div class="contact-container">
                <div class="contact-info">
                    <h2>‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠</h2>
                    
                    <div class="contact-item">
                        <div class="contact-item-icon">üì±</div>
                        <div class="contact-item-text">
                            <h3>‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå</h3>
                            <p>+66 (0) 63897671</p>
                            <p>+66 (0) 923981451</p>
                        </div>
                    </div>

                    <div class="contact-item">
                        <div class="contact-item-icon">‚úâÔ∏è</div>
                        <div class="contact-item-text">
                            <h3>‡∏≠‡∏µ‡πÄ‡∏°‡∏•</h3>
                            <p>66202040030@ptl.ac.th</p>
                            <p>66202040005@ptl.ac.th</p>
                        </div>
                    </div>

                    <div class="contact-item">
                        <div class="contact-item-icon">üìç</div>
                        <div class="contact-item-text">
                            <h3>‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà</h3>
                            <p>58 ‡∏ñ. ‡∏•‡∏π‡∏Å‡∏£‡∏±‡∏á ‡∏ã.‡∏ï‡∏±‡∏ô</p>
                            <p>‡πÅ‡∏Ç‡∏ß‡∏á‡∏û‡∏£‡∏∞‡πÇ‡∏Ç‡∏ô‡∏á ‡πÄ‡∏Ç‡∏ï‡∏Ñ‡∏•‡∏≠‡∏á‡πÄ‡∏ï‡∏¢</p>
                            <p>‡∏û‡∏±‡∏ó‡∏•‡∏∏‡∏á 93000</p>
                        </div>
                    </div>

                    <div class="contact-item">
                        <div class="contact-item-icon">üïí</div>
                        <div class="contact-item-text">
                            <h3>‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏´‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£</h3>
                            <p>‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå-‡∏®‡∏∏‡∏Å‡∏£‡πå: 09:00 - 18:00</p>
                            <p>‡πÄ‡∏™‡∏≤‡∏£‡πå: 10:00 - 17:00</p>
                            <p>‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå: ‡∏õ‡∏¥‡∏î</p>
                        </div>
                    </div>

                    <div class="contact-item">
                        <div class="contact-item-icon">üí¨</div>
                        <div class="contact-item-text">
                            <h3>‡πÇ‡∏ã‡πÄ‡∏ä‡∏µ‡∏¢‡∏•‡∏°‡∏µ‡πÄ‡∏î‡∏µ‡∏¢</h3>
                            <p>Line: - </p>
                            <p>Facebook: ‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏ú‡πâ‡∏≤‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ñ‡∏π‡∏Å Official</p>
                            <p>Instagram: -</p>
                        </div>
                    </div>
                </div>

                <div class="contact-form">
                    <h3 style="margin-bottom: 20px;">‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏∂‡∏á‡πÄ‡∏£‡∏≤</h3>
                    <form onsubmit="handleContactSubmit(event)">
                        <div class="form-group">
                            <label for="name">‡∏ä‡∏∑‡πà‡∏≠</label>
                            <input type="text" id="name" name="name" required>
                        </div>
                        <div class="form-group">
                            <label for="email">‡∏≠‡∏µ‡πÄ‡∏°‡∏•</label>
                            <input type="email" id="email" name="email" required>
                        </div>
                        <div class="form-group">
                            <label for="phone">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå</label>
                            <input type="tel" id="phone" name="phone">
                        </div>
                        <div class="form-group">
                            <label for="subject">‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠</label>
                            <input type="text" id="subject" name="subject" required>
                        </div>
                        <div class="form-group">
                            <label for="message">‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°</label>
                            <textarea id="message" name="message" required></textarea>
                        </div>
                        <div class="form-group">
                            <label for="slip">‡∏™‡∏•‡∏¥‡∏õ‡∏Å‡∏≤‡∏£‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)</label>
                            <input type="file" id="slip" name="slip" accept="image/*">
                            <div id="slip-preview" style="margin-top:10px; display:none;"></div>
                        </div>
                        <button type="submit" class="submit-btn">‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°</button>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <footer>
        <p>&copy; 2026 CLOTHING SHOP. All rights reserved.</p>
    </footer>

    <script>
        function readFileAsDataURL(file) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.onload = () => resolve(reader.result);
                reader.onerror = reject;
                reader.readAsDataURL(file);
            });
        }

        async function handleContactSubmit(event) {
            event.preventDefault();
            const name = document.getElementById('name').value;
            const email = document.getElementById('email').value;
            const phone = document.getElementById('phone').value;
            const subject = document.getElementById('subject').value;
            const message = document.getElementById('message').value;

            const slipInput = document.getElementById('slip');
            let slipData = null;
            if (slipInput && slipInput.files && slipInput.files[0]) {
                try {
                    slipData = await readFileAsDataURL(slipInput.files[0]);
                } catch (e) {
                    console.warn('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏≠‡πà‡∏≤‡∏ô‡πÑ‡∏ü‡∏•‡πå‡∏™‡∏•‡∏¥‡∏õ‡πÑ‡∏î‡πâ', e);
                }
            }

            const contactEntry = {
                id: 'MSG' + Date.now(),
                name,
                email,
                phone,
                subject,
                message,
                slip: slipData,
                createdAt: new Date().toISOString()
            };

            try {
                const list = JSON.parse(localStorage.getItem('contactMessages')) || [];
                list.push(contactEntry);
                localStorage.setItem('contactMessages', JSON.stringify(list));
            } catch (e) {
                console.warn('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÑ‡∏î‡πâ', e);
            }

            alert('‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì ' + name + ' ‡∏Ñ‡πà‡∏∞! ‡πÄ‡∏£‡∏≤‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏•‡πâ‡∏ß ‡∏à‡∏∞‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÄ‡∏£‡πá‡∏ß ‡πÜ ‡∏ô‡∏µ‡πâ');
            event.target.reset();
            const preview = document.getElementById('slip-preview');
            if (preview) { preview.innerHTML = ''; preview.style.display = 'none'; }
        }

        // preview slip when selected
        document.addEventListener('DOMContentLoaded', () => {
            const slipInput = document.getElementById('slip');
            const preview = document.getElementById('slip-preview');
            if (slipInput && preview) {
                slipInput.addEventListener('change', async (e) => {
                    const f = e.target.files && e.target.files[0];
                    if (!f) { preview.innerHTML = ''; preview.style.display='none'; return; }
                    try {
                        const data = await readFileAsDataURL(f);
                        preview.innerHTML = `<img src="${data}" alt="slip" style="max-width:240px; display:block; border:1px solid #eee; padding:6px; border-radius:6px;"/>`;
                        preview.style.display = 'block';
                    } catch (err) {
                        preview.innerHTML = '<div style="color:#c33;">‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå‡πÑ‡∏î‡πâ</div>';
                        preview.style.display = 'block';
                    }
                });
            }
        });
    </script>

    <script src="cart.js"></script>
    <script src="chatbot.js"></script>

</body>
</html>
<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SWG Popup Chat</title>
<link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;500;600&display=swap" rel="stylesheet">
<style>
    /* --- CSS ‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏Å‡πÅ‡∏ï‡πà‡∏á --- */
    body { font-family: 'Prompt', sans-serif; }

    /* 1. ‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏õ‡∏¥‡∏î-‡∏õ‡∏¥‡∏î (‡∏ß‡∏á‡∏Å‡∏•‡∏°‡∏°‡∏∏‡∏°‡∏Ç‡∏ß‡∏≤‡∏•‡πà‡∏≤‡∏á) */
    .chatbot-toggler {
        position: fixed;
        bottom: 30px;
        right: 30px;
        width: 60px;
        height: 60px;
        background: #ff5e9a;
        border-radius: 50%;
        border: none;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        z-index: 9999;
        transition: transform 0.2s;
    }
    .chatbot-toggler:hover { transform: scale(1.1); }
    .chatbot-toggler img { width: 30px; height: 30px; filter: invert(1); }

    /* 2. ‡∏ï‡∏±‡∏ß‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á‡πÅ‡∏ä‡∏ó (‡∏ã‡πà‡∏≠‡∏ô‡∏≠‡∏¢‡∏π‡πà) */
    .chatbot-window {
        position: fixed;
        bottom: 100px;
        right: 30px;
        width: 350px; /* ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á */
        height: 500px; /* ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á */
        background: #fff;
        border-radius: 15px;
        box-shadow: 0 5px 25px rgba(0,0,0,0.2);
        overflow: hidden;
        z-index: 9999;
        display: flex;
        flex-direction: column;
        
        /* ‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ‡∏Å‡∏≤‡∏£‡∏ã‡πà‡∏≠‡∏ô/‡πÅ‡∏™‡∏î‡∏á */
        transform: scale(0.5);
        opacity: 0;
        pointer-events: none; /* ‡∏Å‡∏î‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ñ‡πâ‡∏≤‡∏ã‡πà‡∏≠‡∏ô‡∏≠‡∏¢‡∏π‡πà */
        transform-origin: bottom right;
        transition: all 0.3s ease;
    }

    /* ‡∏Ñ‡∏•‡∏≤‡∏™‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏™‡∏î‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á */
    .show-chat {
        transform: scale(1);
        opacity: 1;
        pointer-events: auto;
    }

    /* ‡∏™‡πà‡∏ß‡∏ô‡∏´‡∏±‡∏ß */
    .chat-header {
        background: #ff5e9a;
        padding: 15px;
        color: white;
        display: flex;
        align-items: center;
        justify-content: space-between;
    }
    .chat-header h3 { margin: 0; font-size: 16px; }
    .close-btn { background: none; border: none; color: white; font-size: 20px; cursor: pointer; }

    /* ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° */
    .chat-box {
        flex: 1;
        padding: 15px;
        background: #f4f7f6;
        overflow-y: auto;
        display: flex;
        flex-direction: column;
        gap: 10px;
    }

    .message {
        max-width: 80%;
        padding: 8px 12px;
        border-radius: 15px;
        font-size: 14px;
        line-height: 1.4;
        word-wrap: break-word;
    }
    .bot { background: #fff; align-self: flex-start; border: 1px solid #eee; border-top-left-radius: 2px; }
    .user { background: #ff5e9a; color: white; align-self: flex-end; border-bottom-right-radius: 2px; }

    /* ‡∏ä‡πà‡∏≠‡∏á‡∏û‡∏¥‡∏°‡∏û‡πå */
    .chat-input {
        padding: 10px;
        border-top: 1px solid #ddd;
        background: #fff;
        display: flex;
        gap: 5px;
    }
    .chat-input input {
        flex: 1;
        padding: 10px;
        border: 1px solid #ddd;
        border-radius: 20px;
        outline: none;
        font-family: 'Prompt', sans-serif;
    }
    .chat-input button {
        background: #ff5e9a;
        color: white;
        border: none;
        padding: 0 15px;
        border-radius: 20px;
        cursor: pointer;
        font-family: 'Prompt', sans-serif;
    }
</style>
</head>
<body>

    <!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SWG Shop Chatbot</title>
<link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;500;700&display=swap" rel="stylesheet">

<style>
    /* ================= CSS: ‡∏™‡πà‡∏ß‡∏ô‡∏î‡∏µ‡πÑ‡∏ã‡∏ô‡πå‡∏ï‡∏Å‡πÅ‡∏ï‡πà‡∏á ================= */
    body { font-family: 'Prompt', sans-serif; background-color: #fdf2f7; margin: 0; padding: 0; }

    /* ‡∏õ‡∏∏‡πà‡∏°‡∏Å‡∏•‡∏°‡πÜ ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏î‡πÄ‡∏õ‡∏¥‡∏î‡πÅ‡∏ä‡∏ó (‡∏•‡∏≠‡∏¢‡∏≠‡∏¢‡∏π‡πà‡∏Ç‡∏ß‡∏≤‡∏•‡πà‡∏≤‡∏á) */
    .chatbot-toggler {
        position: fixed; bottom: 30px; right: 30px;
        width: 60px; height: 60px;
        background: #ff5e9a; border-radius: 50%; border: none; cursor: pointer;
        display: flex; align-items: center; justify-content: center;
        box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        z-index: 9999; transition: transform 0.2s;
    }
    .chatbot-toggler:hover { transform: scale(1.1); }
    .chatbot-toggler svg { stroke: white; width: 30px; height: 30px; }

    /* ‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á‡πÅ‡∏ä‡∏ó (‡∏ã‡πà‡∏≠‡∏ô‡∏≠‡∏¢‡∏π‡πà‡∏ï‡∏≠‡∏ô‡πÅ‡∏£‡∏Å) */
    .chatbot-window {
        position: fixed; bottom: 100px; right: 30px;
        width: 360px; height: 550px; max-height: 80vh;
        background: #fff; border-radius: 20px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.15);
        overflow: hidden; z-index: 9999;
        display: flex; flex-direction: column;
        transform: scale(0); opacity: 0; pointer-events: none;
        transform-origin: bottom right;
        transition: all 0.3s ease;
    }
    /* ‡∏Ñ‡∏•‡∏≤‡∏™‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÄ‡∏ï‡∏¥‡∏°‡πÇ‡∏î‡∏¢ JS ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏™‡∏î‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á‡πÅ‡∏ä‡∏ó */
    .show-chat { transform: scale(1); opacity: 1; pointer-events: auto; }

    /* ‡∏™‡πà‡∏ß‡∏ô‡∏´‡∏±‡∏ß (Header) */
    .chat-header {
        background: linear-gradient(135deg, #ff5e9a, #ff9bb6);
        padding: 15px 20px; color: white;
        display: flex; justify-content: space-between; align-items: center;
    }
    .chat-header h3 { margin: 0; font-size: 18px; font-weight: 600; }
    .close-btn { background: none; border: none; color: white; font-size: 24px; cursor: pointer; }

    /* ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏ä‡∏ó (Body) */
    .chat-box {
        flex: 1; padding: 15px; background: #fffcfd;
        overflow-y: auto; display: flex; flex-direction: column; gap: 12px;
    }

    /* ‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° Chat Bubble */
    .message {
        max-width: 80%; padding: 10px 14px; border-radius: 12px;
        font-size: 14px; line-height: 1.5; word-wrap: break-word;
    }
    .bot-msg {
        align-self: flex-start; background: #f1f1f1; color: #333;
        border-bottom-left-radius: 2px;
    }
    .user-msg {
        align-self: flex-end; background: #ff5e9a; color: white;
        border-bottom-right-radius: 2px;
    }

    /* --- ‚ú® ‡∏î‡∏µ‡πÑ‡∏ã‡∏ô‡πå‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Product Card) ‚ú® --- */
    .product-list {
        display: flex; flex-direction: column; gap: 10px; width: 100%; margin-top: 5px;
    }
    .product-card {
        background: white;
        border: 1px solid #ff5e9a; /* ‡∏Ç‡∏≠‡∏ö‡∏™‡∏µ‡∏ä‡∏°‡∏û‡∏π */
        border-radius: 15px;       /* ‡∏°‡∏∏‡∏°‡∏°‡∏ô */
        padding: 12px 15px;
        display: flex; justify-content: space-between; align-items: center;
        cursor: pointer; transition: 0.2s;
        box-shadow: 0 2px 5px rgba(0,0,0,0.03);
    }
    .product-card:hover {
        background: #fff0f6; /* ‡∏ä‡∏µ‡πâ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ‡∏ä‡∏°‡∏û‡∏π‡∏≠‡πà‡∏≠‡∏ô */
        transform: translateX(3px);
    }
    /* ‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡∏ä‡∏∏‡∏î (‡∏õ‡∏£‡∏±‡∏ö‡∏™‡∏µ Emoji ‡∏à‡∏≤‡∏Å‡∏ä‡∏°‡∏û‡∏π‡πÄ‡∏õ‡πá‡∏ô‡∏ü‡πâ‡∏≤) */
    .icon-dress { 
        font-size: 20px; margin-right: 8px; 
        filter: hue-rotate(220deg) brightness(1.1); 
    }
    .prod-name { color: #ff5e9a; font-weight: 500; font-size: 14px; }
    .prod-price { color: #ff5e9a; font-weight: 700; font-size: 15px; }

    /* ‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ò‡∏µ‡∏° */
    .theme-group { display: grid; gap: 8px; margin-top: 5px; }
    .theme-btn {
        padding: 10px; border-radius: 10px; border: 1px solid #ddd;
        background: white; text-align: center; cursor: pointer; font-size: 14px;
    }
    .theme-btn:hover { background: #eee; }

    /* ‡∏ä‡πà‡∏≠‡∏á‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° */
    .chat-input {
        padding: 15px; background: white; border-top: 1px solid #eee;
        display: flex; gap: 10px;
    }
    .chat-input input {
        flex: 1; padding: 10px 15px; border: 1px solid #e0e0e0;
        border-radius: 25px; outline: none; font-family: 'Prompt';
    }
    .chat-input button {
        background: #ff5e9a; color: white; border: none;
        width: 40px; height: 40px; border-radius: 50%; cursor: pointer;
    }
</style>
</head>
<body>

   <!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SWG Shop Chatbot</title>
    <style>
        /* 1. CSS ‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏ï‡∏Å‡πÅ‡∏ï‡πà‡∏á */
        * { box-sizing: border-box; font-family: 'Sarabun', sans-serif; }
        body { margin: 0; padding: 0; background-color: #f4f4f9; }

        /* ‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏õ‡∏¥‡∏î‡πÅ‡∏ä‡∏ó */
        .chatbot-toggler {
            position: fixed; bottom: 30px; right: 30px;
            width: 60px; height: 60px;
            border: none; border-radius: 50%;
            background: #d63384; color: #fff;
            cursor: pointer; box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            display: flex; align-items: center; justify-content: center;
            transition: transform 0.2s; z-index: 9999;
        }
        .chatbot-toggler:hover { transform: scale(1.1); }
        .chatbot-toggler svg { width: 30px; height: 30px; }

        /* ‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á‡πÅ‡∏ä‡∏ó */
        .chatbot-window {
            position: fixed; bottom: 100px; right: 30px;
            width: 380px; height: 550px;
            background: #fff; border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.15);
            display: flex; flex-direction: column;
            overflow: hidden;
            opacity: 0; pointer-events: none; transform: translateY(20px);
            transition: all 0.3s ease; z-index: 9998;
        }
        .chatbot-window.show-chat { opacity: 1; pointer-events: auto; transform: translateY(0); }

        /* ‡∏™‡πà‡∏ß‡∏ô‡∏´‡∏±‡∏ß‡πÅ‡∏ä‡∏ó */
        .chat-header {
            background: #d63384; color: #fff; padding: 15px;
            display: flex; justify-content: space-between; align-items: center;
        }
        .chat-header h3 { margin: 0; font-size: 1.1rem; }
        .close-btn { background: none; border: none; color: #fff; font-size: 1.5rem; cursor: pointer; }

        /* ‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° */
        .chat-box {
            flex: 1; padding: 15px; overflow-y: auto;
            background: #fff; display: flex; flex-direction: column; gap: 10px;
        }

        /* ‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° */
        .message { max-width: 80%; padding: 10px 14px; border-radius: 10px; font-size: 0.95rem; line-height: 1.4; }
        .bot-msg { align-self: flex-start; background: #f1f1f1; color: #333; border-bottom-left-radius: 2px; }
        .user-msg { align-self: flex-end; background: #d63384; color: #fff; border-bottom-right-radius: 2px; }

        /* ‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° */
        .chat-input {
            border-top: 1px solid #eee; padding: 10px;
            display: flex; gap: 10px; background: #fff;
        }
        .chat-input input {
            flex: 1; padding: 10px; border: 1px solid #ddd; border-radius: 20px; outline: none;
        }
        .chat-input button {
            background: #d63384; color: #fff; border: none;
            padding: 10px 15px; border-radius: 50%; cursor: pointer;
        }

        /* ‡∏ò‡∏µ‡∏°‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏•‡∏∑‡∏≠‡∏Å */
        .theme-group { display: flex; flex-direction: column; gap: 8px; margin-top: 10px; }
        .theme-btn {
            padding: 10px; border: 1px solid #ddd; border-radius: 8px;
            cursor: pointer; text-align: center; font-weight: bold; background: #fff;
            transition: 0.2s;
        }
        .theme-btn:hover { background: #f8f8f8; transform: translateY(-2px); }

        /* ‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ */
        .product-list { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-top: 10px; }
        .product-card {
            border: 1px solid #eee; border-radius: 8px; padding: 10px;
            background: #fff; cursor: pointer; transition: 0.2s;
            display: flex; flex-direction: column; justify-content: space-between;
        }
        .product-card:hover { border-color: #d63384; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .prod-name { font-size: 0.85rem; font-weight: bold; margin-left: 5px; }
        .prod-price { font-size: 0.9rem; color: #d63384; font-weight: bold; margin-top: 5px; text-align: right; }

        /* --- ‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à (Receipt) --- */
        .receipt-card {
            background-color: #fff;
            border: 2px dashed #ffa6c1; /* ‡πÄ‡∏™‡πâ‡∏ô‡∏õ‡∏£‡∏∞‡∏™‡∏µ‡∏ä‡∏°‡∏û‡∏π */
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
            font-size: 0.9rem;
            color: #555;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            position: relative;
        }
        .receipt-head {
            text-align: center;
            font-weight: bold;
            color: #d63384;
            margin-bottom: 12px;
            border-bottom: 1px solid #eee;
            padding-bottom: 8px;
            font-size: 1rem;
        }
        .receipt-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 6px;
        }
        .receipt-total {
            margin-top: 10px;
            padding-top: 10px;
            border-top: 2px solid #eee;
            font-weight: bold;
            font-size: 1.1rem;
            color: #333;
            display: flex;
            justify-content: space-between;
        }
        .addr-box {
            background: #f9f9f9;
            padding: 10px;
            border-radius: 5px;
            margin-top: 12px;
            font-size: 0.85rem;
            color: #333;
            border: 1px solid #eee;
        }

        /* Responsive ‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ */
        @media(max-width: 480px) {
            .chatbot-window { width: 90%; right: 5%; bottom: 90px; height: 70vh; }
        }
    </style>
</head>
<body>

    <!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SWG Shop Chatbot</title>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        /* 1. CSS ‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô */
        * { box-sizing: border-box; font-family: 'Sarabun', sans-serif; }
        body { margin: 0; padding: 0; background-color: #f4f4f9; }

        /* ‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏õ‡∏¥‡∏î‡πÅ‡∏ä‡∏ó */
        .chatbot-toggler {
            position: fixed; bottom: 30px; right: 30px;
            width: 60px; height: 60px;
            border: none; border-radius: 50%;
            background: #d63384; color: #fff;
            cursor: pointer; box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            display: flex; align-items: center; justify-content: center;
            transition: transform 0.2s; z-index: 9999;
        }
        .chatbot-toggler:hover { transform: scale(1.1); }
        .chatbot-toggler svg { width: 30px; height: 30px; }

        /* ‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á‡πÅ‡∏ä‡∏ó */
        .chatbot-window {
            position: fixed; bottom: 100px; right: 30px;
            width: 380px; height: 550px;
            background: #fff; border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.15);
            display: flex; flex-direction: column;
            overflow: hidden;
            opacity: 0; pointer-events: none; transform: translateY(20px);
            transition: all 0.3s ease; z-index: 9998;
        }
        .chatbot-window.show-chat { opacity: 1; pointer-events: auto; transform: translateY(0); }

        /* ‡∏™‡πà‡∏ß‡∏ô‡∏´‡∏±‡∏ß‡πÅ‡∏ä‡∏ó */
        .chat-header {
            background: #d63384; color: #fff; padding: 15px;
            display: flex; justify-content: space-between; align-items: center;
        }
        .chat-header h3 { margin: 0; font-size: 1.1rem; }
        .close-btn { background: none; border: none; color: #fff; font-size: 1.5rem; cursor: pointer; }

        /* ‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° */
        .chat-box {
            flex: 1; padding: 15px; overflow-y: auto;
            background: #fff; display: flex; flex-direction: column; gap: 10px;
        }

        /* ‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° */
        .message { max-width: 80%; padding: 10px 14px; border-radius: 10px; font-size: 0.95rem; line-height: 1.4; }
        .bot-msg { align-self: flex-start; background: #f1f1f1; color: #333; border-bottom-left-radius: 2px; }
        .user-msg { align-self: flex-end; background: #d63384; color: #fff; border-bottom-right-radius: 2px; }

        /* ‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° */
        .chat-input {
            border-top: 1px solid #eee; padding: 10px;
            display: flex; gap: 10px; background: #fff;
        }
        .chat-input input {
            flex: 1; padding: 10px; border: 1px solid #ddd; border-radius: 20px; outline: none;
        }
        .chat-input button {
            background: #d63384; color: #fff; border: none;
            padding: 10px 15px; border-radius: 50%; cursor: pointer;
        }

        /* ‡∏ò‡∏µ‡∏°‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏•‡∏∑‡∏≠‡∏Å */
        .theme-group { display: flex; flex-direction: column; gap: 8px; margin-top: 10px; }
        .theme-btn {
            padding: 10px; border: 1px solid #ddd; border-radius: 8px;
            cursor: pointer; text-align: center; font-weight: bold; background: #fff;
            transition: 0.2s;
        }
        .theme-btn:hover { background: #f8f8f8; transform: translateY(-2px); }

        /* ‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ */
        .product-list { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-top: 10px; }
        .product-card {
            border: 1px solid #eee; border-radius: 8px; padding: 10px;
            background: #fff; cursor: pointer; transition: 0.2s;
            display: flex; flex-direction: column; justify-content: space-between;
        }
        .product-card:hover { border-color: #d63384; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .prod-name { font-size: 0.85rem; font-weight: bold; margin-left: 5px; }
        .prod-price { font-size: 0.9rem; color: #d63384; font-weight: bold; margin-top: 5px; text-align: right; }

        /* --- ‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à (Receipt) --- */
        .receipt-card {
            background-color: #fff;
            border: 2px dashed #ffa6c1; 
            border-radius: 10px; padding: 15px; margin: 10px 0;
            font-size: 0.9rem; color: #555;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
        }
        .receipt-head {
            text-align: center; font-weight: bold; color: #d63384;
            margin-bottom: 12px; border-bottom: 1px solid #eee; padding-bottom: 8px;
        }
        .receipt-row { display: flex; justify-content: space-between; margin-bottom: 6px; }
        .receipt-total {
            margin-top: 10px; padding-top: 10px; border-top: 2px solid #eee;
            font-weight: bold; font-size: 1.1rem; color: #333;
            display: flex; justify-content: space-between;
        }
        .addr-box {
            background: #f9f9f9; padding: 10px; border-radius: 5px;
            margin-top: 12px; font-size: 0.85rem; color: #333; border: 1px solid #eee;
        }

        @media(max-width: 480px) {
            .chatbot-window { width: 90%; right: 5%; bottom: 90px; height: 70vh; }
        }
    </style>
</head>
<body>
  
    <button class="chatbot-toggler" onclick="toggleChat()">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg>
    </button>

    <div class="chatbot-window" id="chat-window">
        <div class="chat-header">
            <h3>‡∏ô‡πâ‡∏≠‡∏á SWG (Admin) üçä</h3>
            <button class="close-btn" onclick="toggleChat()">√ó</button>
        </div>
        <div class="chat-box" id="chat-box"></div>
        
        <div class="chat-input">
            <label for="img-upload" style="cursor:pointer; font-size:24px; margin-right:8px;" title="‡πÅ‡∏ô‡∏ö‡∏™‡∏•‡∏¥‡∏õ‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô">üì∑</label>
            <input type="file" id="img-upload" accept="image/*" style="display:none" onchange="sendImage()">
            <input type="text" id="user-input" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°..." onkeypress="if(event.key==='Enter') sendMessage()">
            <button onclick="sendMessage()">‚û§</button>
        </div>
    </div>

    <script>
        // --- 1. ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ ---
        const catalog = {
            "bestseller": [
                { name: "‡∏ä‡∏∏‡∏î‡πÄ‡∏î‡∏£‡∏™‡∏™‡πÑ‡∏ï‡∏•‡πå‡πÄ‡∏Å‡∏≤‡∏´‡∏•‡∏µ", price: 350, star: "‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê" },
                { name: "‡∏ä‡∏∏‡∏î‡πÄ‡∏ã‡πá‡∏ï‡πÑ‡∏´‡∏°‡∏û‡∏£‡∏°‡∏•‡∏∞‡∏°‡∏∏‡∏ô", price: 420, star: "‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê" },
                { name: "‡∏ä‡∏∏‡∏î‡πÄ‡∏î‡∏£‡∏™‡πÇ‡∏ö‡∏ß‡πå‡∏ä‡∏°‡∏û‡∏π", price: 490, star: "‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê" },
                { name: "‡∏ä‡∏∏‡∏î‡πÄ‡∏ã‡πá‡∏ï‡∏Ñ‡∏∏‡∏ì‡∏´‡∏ô‡∏π‡πÇ‡∏ö‡∏ß‡πå‡∏´‡∏ß‡∏≤‡∏ô", price: 750, star: "‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê" },
                { name: "‡∏ä‡∏∏‡∏î‡πÄ‡∏î‡∏£‡∏™‡∏™‡∏µ‡πÅ‡∏î‡∏á‡∏ú‡∏π‡∏Å‡∏Ñ‡∏≠", price: 399, star: "‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê" },
                { name: "‡πÄ‡∏î‡∏£‡∏™‡∏™‡∏µ‡πÅ‡∏î‡∏á‡∏™‡∏≤‡∏¢‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß‡πÄ‡∏ß‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤", price: 650, star: "‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê" }
            ],
            "recommend": [
                 { name: "‡∏ä‡∏∏‡∏î‡πÄ‡∏î‡∏£‡∏™‡∏•‡∏≤‡∏¢‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏•‡πá‡∏Å", price: 350 },
                { name: "‡∏ä‡∏∏‡∏î‡πÄ‡∏î‡∏£‡∏™‡∏™‡∏µ‡∏Ñ‡∏£‡∏µ‡∏°‡∏•‡∏≤‡∏¢‡∏à‡∏∏‡∏î‡∏î‡∏≥", price: 450 },
                { name: "‡∏ä‡∏∏‡∏î‡πÄ‡∏î‡∏£‡∏™‡∏•‡∏≤‡∏¢‡∏™‡∏Å‡πä‡∏≠‡∏ï", price: 490 },
                { name: "‡∏ä‡∏∏‡∏î‡πÄ‡∏î‡∏£‡∏™‡πÅ‡∏Ç‡∏ô‡∏ï‡∏∏‡πä‡∏Å‡∏ï‡∏≤‡∏°‡∏¥‡∏ô‡∏¥‡∏°‡∏≠‡∏•", price: 550 },
                { name: "‡∏ä‡∏∏‡∏î‡πÄ‡∏î‡∏£‡∏™‡∏•‡∏≤‡∏¢‡∏î‡∏≠‡∏Å‡πÑ‡∏°‡πâ‡∏õ‡∏±‡∏Å", price: 590 },
                { name: "‡∏ä‡∏∏‡∏î‡πÄ‡∏î‡∏£‡∏™‡∏•‡∏≤‡∏¢‡∏î‡∏≠‡∏Å‡πÑ‡∏°‡πâ‡πÄ‡∏•‡πá‡∏Å", price: 350 }
            ],
            "white": [
                { name: "‡∏ä‡∏∏‡∏î‡πÄ‡∏î‡∏£‡∏™‡πÇ‡∏ö‡∏ß‡πå‡∏´‡∏ô‡πâ‡∏≤", price: 359 },
                { name: "‡∏ä‡∏∏‡∏î‡πÄ‡∏î‡∏£‡∏™‡πÅ‡∏Ç‡∏ô‡∏ï‡∏∏‡πä‡∏Å‡∏ï‡∏≤", price: 459 },
                { name: "‡πÄ‡∏î‡∏£‡∏™‡∏£‡∏∞‡∏ö‡∏≤‡∏¢‡∏•‡∏π‡∏Å‡πÑ‡∏°‡πâ", price: 599 },
                { name: "‡∏ä‡∏∏‡∏î‡πÄ‡∏î‡∏£‡∏™‡∏™‡πÑ‡∏ï‡∏•‡πå‡πÄ‡∏Å‡∏≤‡∏´‡∏•‡∏µ", price: 350 },
                { name: "‡∏ä‡∏∏‡∏î‡πÄ‡∏î‡∏£‡∏™‡πÇ‡∏õ‡πÇ‡∏•", price: 490 },
                { name: "‡∏ä‡∏∏‡∏î‡πÄ‡∏ã‡πá‡∏ï‡πÑ‡∏´‡∏°‡∏û‡∏£‡∏°", price: 420 }
            ],
            "pink": [
               { name: "‡∏ä‡∏∏‡∏î‡πÄ‡∏î‡∏£‡∏™‡πÇ‡∏ö‡∏ß‡πå‡πÑ‡∏´‡∏•‡πà‡∏´‡∏ß‡∏≤‡∏ô", price: 350 },
                { name: "‡∏ä‡∏∏‡∏î‡πÄ‡∏î‡∏£‡∏™‡πÇ‡∏ö‡∏ß‡πå‡∏ä‡∏°‡∏û‡∏π", price: 490 },
                { name: "‡πÄ‡∏î‡∏£‡∏™‡∏•‡∏≤‡∏¢‡∏î‡∏≠‡∏Å‡∏Å‡∏∏‡∏´‡∏•‡∏≤‡∏ö", price: 590 },
                { name: "‡∏ä‡∏∏‡∏î‡πÄ‡∏î‡∏£‡∏™‡∏•‡∏≤‡∏¢‡∏à‡∏∏‡∏î‡∏ä‡∏°‡∏û‡∏π", price: 380 },
                { name: "‡πÄ‡∏ã‡πá‡∏ï‡∏Ñ‡∏∏‡∏ì‡∏´‡∏ô‡∏π‡πÇ‡∏ö‡∏ß‡πå‡∏´‡∏ß‡∏≤‡∏ô", price: 750 },
                { name: "‡πÄ‡∏ã‡πá‡∏ï‡∏Å‡∏•‡∏µ‡∏ö‡∏Å‡∏∏‡∏´‡∏•‡∏≤‡∏ö‡∏≠‡πà‡∏≠‡∏ô", price: 560 }
            ],
            "red": [
               { name: "‡∏ä‡∏∏‡∏î‡πÅ‡∏î‡∏á‡πÅ‡∏û‡∏á‡πÅ‡∏£‡∏á‡∏§‡∏ó‡∏ò‡∏¥‡πå", price: 599 },
                { name: "‡∏ä‡∏∏‡∏î‡πÄ‡∏î‡∏£‡∏™‡∏™‡∏µ‡πÅ‡∏î‡∏á‡∏™‡∏î", price: 599 },
                { name: "‡∏ä‡∏∏‡∏î‡πÄ‡∏î‡∏£‡∏™‡πÅ‡∏î‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏´‡∏£‡∏π", price: 499 },
                { name: "‡∏ä‡∏∏‡∏î‡πÄ‡∏î‡∏£‡∏™‡πÅ‡∏î‡∏á‡∏ú‡∏π‡∏Å‡∏Ñ‡∏≠", price: 399 },
                { name: "‡πÄ‡∏î‡∏£‡∏™‡πÅ‡∏î‡∏á‡∏™‡∏≤‡∏¢‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß", price: 650 },
                { name: "‡∏ä‡∏∏‡∏î‡πÄ‡∏î‡∏£‡∏™‡πÇ‡∏ö‡∏ß‡πå‡πÅ‡∏î‡∏á", price: 399 }
            ]
        };

        // --- 2. ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏£‡∏∞‡∏ö‡∏ö ---
        let chatStep = 0;
        let myOrder = { item: "", price: 0, size: "", qty: 1, total: 0, address: "", payment: "" };
        let allProducts = [];
        Object.values(catalog).forEach(list => allProducts.push(...list));

        // --- 3. ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô ---
        function toggleChat() {
            const win = document.getElementById('chat-window');
            win.classList.toggle('show-chat');
            if(win.classList.contains('show-chat')) {
                const box = document.getElementById('chat-box');
                if(box.innerHTML.trim() === "") showMainMenu();
            }
        }

        function showMainMenu() {
            chatStep = 0;
            const chatBox = document.getElementById('chat-box');
            chatBox.innerHTML = ''; 
            
            addBotMsg("‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡πà‡∏∞! ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏π‡πà SWG Shop üíñ<br>‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏£‡∏±‡∏ö‡∏ä‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏´‡∏°‡∏ß‡∏î‡πÑ‡∏´‡∏ô‡∏î‡∏µ‡∏Ñ‡∏∞? üëá");

            const themesHtml = `
                <div class="theme-group">
                    <div class="theme-btn" onclick="selectTheme('bestseller')" style="background: linear-gradient(135deg, #fff 0%, #fffbe6 100%); color:#d48806; border: 1px solid #ffe58f;">üèÜ ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ç‡∏≤‡∏¢‡∏î‡∏µ (Best Seller) ‚≠ê</div>
                    <div class="theme-btn" onclick="selectTheme('recommend')" style="background:#f0f5ff; color:#1d39c4; border-color:#adc6ff;">üåü ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥ (New Arrival)</div>
                    <div class="theme-btn" onclick="selectTheme('white')">ü§ç ‡∏ò‡∏µ‡∏°‡∏™‡∏µ‡∏Ç‡∏≤‡∏ß (Minimal)</div>
                    <div class="theme-btn" onclick="selectTheme('pink')" style="color:#d63384; background:#fff0f6;">ü©∑ ‡∏ò‡∏µ‡∏°‡∏™‡∏µ‡∏ä‡∏°‡∏û‡∏π (Sweet)</div>
                    <div class="theme-btn" onclick="selectTheme('red')" style="color:#c92a2a; background:#fff5f5;">‚ù§Ô∏è ‡∏ò‡∏µ‡∏°‡∏™‡∏µ‡πÅ‡∏î‡∏á (Hot)</div>
                </div>
            `;
            addBotMsg(themesHtml);
        }

        function selectTheme(themeKey) {
            chatStep = 1;
            let themeName = "";
            if(themeKey === 'bestseller') themeName = "üèÜ ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ç‡∏≤‡∏¢‡∏î‡∏µ";
            else if(themeKey === 'recommend') themeName = "üåü ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥";
            else if(themeKey === 'white') themeName = "ü§ç ‡∏ò‡∏µ‡∏°‡∏™‡∏µ‡∏Ç‡∏≤‡∏ß";
            else if(themeKey === 'pink') themeName = "ü©∑ ‡∏ò‡∏µ‡∏°‡∏™‡∏µ‡∏ä‡∏°‡∏û‡∏π";
            else themeName = "‚ù§Ô∏è ‡∏ò‡∏µ‡∏°‡∏™‡∏µ‡πÅ‡∏î‡∏á";

            addBotMsg(`‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏î‡∏π <b>${themeName}</b> ‡∏ô‡∏∞‡∏Ñ‡∏∞ üëá`);

            let listHtml = '<div class="product-list">';
            catalog[themeKey].forEach(p => {
                let starHtml = p.star ? `<span class="star-rating">${p.star}</span>` : '';
                listHtml += `
                <div class="product-card" onclick="selectProduct('${p.name}', ${p.price})">
                    <div>
                        <div class="prod-name">${p.name}</div>
                        ${starHtml}
                    </div>
                    <span class="prod-price">‡∏ø${p.price}</span>
                </div>`;
            });
            listHtml += '</div>';
            
            addBotMsg(listHtml);
        }

        function selectProduct(name, price) {
            sendMessage(name);
        }

        function sendMessage(textOverride = null) {
            const input = document.getElementById('user-input');
            const text = textOverride || input.value.trim();
            if (!text) return;

            addUserMsg(text);
            input.value = "";
            setTimeout(() => { processBotLogic(text); }, 600);
        }

        // --- 4. Logic ‡∏´‡∏•‡∏±‡∏Å‡∏Ç‡∏≠‡∏á‡∏ö‡∏≠‡∏ó (‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÉ‡∏´‡∏°‡πà) ---
        function processBotLogic(text) {
            
            // ‡πÄ‡∏ä‡πá‡∏Ñ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ
            if (text.includes("‡πÄ‡∏°‡∏ô‡∏π") || text.includes("‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà") || text.includes("‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ")) {
                showMainMenu();
                return;
            }
            else if (text.includes("‡∏Ñ‡πà‡∏≤‡∏™‡πà‡∏á") || text.includes("‡∏™‡πà‡∏á‡∏Å‡∏µ‡πà‡∏ö‡∏≤‡∏ó")) {
                addBotMsg("üì¶ ‡∏Ñ‡πà‡∏≤‡∏à‡∏±‡∏î‡∏™‡πà‡∏á **‡πÄ‡∏´‡∏°‡∏≤‡∏à‡πà‡∏≤‡∏¢ 50 ‡∏ö‡∏≤‡∏ó** ‡∏ó‡∏±‡πà‡∏ß‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡∏Ñ‡πà‡∏∞!<br>(‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ ‡∏ã‡∏∑‡πâ‡∏≠‡∏Ñ‡∏£‡∏ö 1,000.- ‡∏™‡πà‡∏á‡∏ü‡∏£‡∏µ EMS ‡πÄ‡∏•‡∏¢‡∏ô‡πâ‡∏≤ üíñ)");
                return;
            }
            else if (text.includes("‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì") || text.includes("‡∏Ç‡∏≠‡∏ö‡πÉ‡∏à")) {
                addBotMsg("‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏°‡∏≤‡∏Å‡πÜ ‡πÄ‡∏•‡∏¢‡∏Ñ‡πà‡∏≤ ü•∞ ‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡∏≠‡∏∏‡∏î‡∏´‡∏ô‡∏∏‡∏ô SWG Shop ‡∏ô‡∏∞‡∏Ñ‡∏∞ üôè‚ú®<br>‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Ç‡∏≠‡∏á‡πÅ‡∏•‡πâ‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏•‡∏∑‡∏°‡∏°‡∏≤‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡πÉ‡∏´‡πâ‡πÄ‡∏Ñ‡πâ‡∏≤‡∏î‡πâ‡∏ß‡∏¢‡∏ô‡πâ‡∏≤‡∏≤ üíñ<br>(‡πÇ‡∏≠‡∏Å‡∏≤‡∏™‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ä‡∏¥‡∏ç‡πÉ‡∏´‡∏°‡πà‡∏ô‡∏∞‡∏Ñ‡∏∞)");
                return;
            }

            // --- FLOW ‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠ ---
            if (chatStep === 0 || chatStep === 1) {
                const found = allProducts.find(p => p.name === text);
                if (found) {
                    myOrder.item = found.name;
                    myOrder.price = found.price;
                    chatStep = 2;
                    
                    // ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÑ‡∏ã‡∏™‡πå
                    const sizeInfo = `
                        ‡∏£‡∏±‡∏ö <b>${found.name}</b> (‡∏ø${found.price}) ‡∏ô‡∏∞‡∏Ñ‡∏∞ ‚ú®<br><br>
                        üìè <b>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÑ‡∏ã‡∏™‡πå (‡∏ô‡∏¥‡πâ‡∏ß):</b><br>
                        ‚Ä¢ <b>S</b> : ‡∏≠‡∏Å 32" / ‡πÄ‡∏≠‡∏ß 26" / ‡∏™‡∏∞‡πÇ‡∏û‡∏Å 36"<br>
                        ‚Ä¢ <b>M</b> : ‡∏≠‡∏Å 34" / ‡πÄ‡∏≠‡∏ß 28" / ‡∏™‡∏∞‡πÇ‡∏û‡∏Å 38"<br>
                        ‚Ä¢ <b>L</b> : ‡∏≠‡∏Å 36" / ‡πÄ‡∏≠‡∏ß 30" / ‡∏™‡∏∞‡πÇ‡∏û‡∏Å 40"<br>
                        ‚Ä¢ <b>XL</b>: ‡∏≠‡∏Å 38" / ‡πÄ‡∏≠‡∏ß 32" / ‡∏™‡∏∞‡πÇ‡∏û‡∏Å 42"<br><br>
                        ‡∏£‡∏±‡∏ö‡πÑ‡∏ã‡∏™‡πå‡∏≠‡∏∞‡πÑ‡∏£‡∏î‡∏µ‡∏Ñ‡∏∞? (‡∏û‡∏¥‡∏°‡∏û‡πå S, M, L ‡∏´‡∏£‡∏∑‡∏≠ XL ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‡∏Ñ‡πà‡∏∞)
                    `;
                    addBotMsg(sizeInfo);
                } else {
                    addBotMsg("‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ñ‡πà‡∏∞ ‡∏•‡∏≠‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡πÄ‡∏°‡∏ô‡∏π‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‡∏ô‡∏∞‡∏Ñ‡∏∞ üòä");
                }
            }
            else if (chatStep === 2) {
                myOrder.size = text.toUpperCase();
                chatStep = 3;
                addBotMsg(`‡πÑ‡∏ã‡∏™‡πå ${myOrder.size} ‡∏ô‡∏∞‡∏Ñ‡∏∞ üëå ‡∏£‡∏±‡∏ö‡∏Å‡∏µ‡πà‡∏ä‡∏∏‡∏î‡∏î‡∏µ‡∏Ñ‡∏∞?`);
            } 
            else if (chatStep === 3) {
                let qtyNum = parseInt(text.replace(/\D/g, '')); 
                if(isNaN(qtyNum) || qtyNum < 1) qtyNum = 1;
                myOrder.qty = qtyNum;
                myOrder.total = myOrder.price * qtyNum;
                chatStep = 4;
                addBotMsg(`‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏° <b>‡∏ø${myOrder.total.toLocaleString()}</b> ‡∏Ñ‡πà‡∏∞<br>‡∏£‡∏ö‡∏Å‡∏ß‡∏ô‡∏Ç‡∏≠ <b>‡∏ä‡∏∑‡πà‡∏≠-‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà-‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£</b> ‡∏à‡∏±‡∏î‡∏™‡πà‡∏á‡∏î‡πâ‡∏ß‡∏¢‡∏ô‡∏∞‡∏Ñ‡∏∞ üöö`);
            } 
            else if (chatStep === 4) {
                // ‡∏£‡∏±‡∏ö‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà -> ‡∏ñ‡∏≤‡∏°‡∏ß‡∏¥‡∏ò‡∏µ‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô
                myOrder.address = text;
                chatStep = 5;
                addBotMsg(`‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡∏Ñ‡πà‡∏∞ üè°<br>‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏™‡∏∞‡∏î‡∏ß‡∏Å‡∏ä‡∏≥‡∏£‡∏∞‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á‡πÑ‡∏´‡∏ô‡∏Ñ‡∏∞? üëá<br>
                    <div class="theme-group">
                        <div class="theme-btn" onclick="sendMessage('‡πÇ‡∏≠‡∏ô‡∏ä‡∏≥‡∏£‡∏∞')" style="border-color:#d63384; color:#d63384;">üèß ‡πÇ‡∏≠‡∏ô‡∏ä‡∏≥‡∏£‡∏∞</div>
                        <div class="theme-btn" onclick="sendMessage('‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á')" style="border-color:#198754; color:#198754;">üöö ‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á</div>
                    </div>`);
            }
            else if (chatStep === 5) {
                // ‡∏£‡∏±‡∏ö‡∏ß‡∏¥‡∏ò‡∏µ‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô -> ‡∏™‡∏£‡∏∏‡∏õ‡∏¢‡∏≠‡∏î
                if (text.includes("‡πÇ‡∏≠‡∏ô") || text.includes("‡∏ö‡∏±‡∏ç‡∏ä‡∏µ")) {
                    myOrder.payment = "‡πÇ‡∏≠‡∏ô‡∏ä‡∏≥‡∏£‡∏∞";
                    chatStep = 6; // ‡πÑ‡∏õ‡∏£‡∏≠‡∏™‡∏•‡∏¥‡∏õ

                    // ‡πÉ‡∏ö‡∏™‡∏£‡∏∏‡∏õ‡∏¢‡∏≠‡∏î (‡πÇ‡∏≠‡∏ô)
                    const receiptHTML = `
                        <div class="receipt-card">
                            <div style="background:#f8f9fa; padding:10px; border-radius:8px; border:1px dashed #ccc;">
                                <div>üìÑ <b>‡πÉ‡∏ö‡∏™‡∏£‡∏∏‡∏õ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ (‡πÇ‡∏≠‡∏ô‡∏ä‡∏≥‡∏£‡∏∞)</b></div>
                                <hr style="margin:5px 0; border:0; border-top:1px dashed #ddd;">
                                <div>‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤: ${myOrder.item}</div>
                                <div>‡∏¢‡∏≠‡∏î‡∏™‡∏∏‡∏ó‡∏ò‡∏¥: <b style="color:#d63384;">‡∏ø${myOrder.total.toLocaleString()}</b></div>
                                <div style="font-size:12px; color:#666;">‡∏™‡πà‡∏á‡πÑ‡∏õ‡∏ó‡∏µ‡πà: ${myOrder.address}</div>
                            </div>
                            <br>
                            üè¶ <b>‡∏ò.‡πÑ‡∏ó‡∏¢‡∏û‡∏≤‡∏ì‡∏¥‡∏ä‡∏¢‡πå (KBANK)</b><br>
                            ‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà: <b>063-0-89767-1</b><br>
                            ‡∏ä‡∏∑‡πà‡∏≠: ‡∏ö‡∏à‡∏Å. SWG Shop<br>
                            ---------------------------<br>
                            üí∏ ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡∏Å‡∏•‡πâ‡∏≠‡∏á üì∑ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏ô‡∏ö‡∏™‡∏•‡∏¥‡∏õ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‡∏ô‡∏∞‡∏Ñ‡∏∞
                        </div>
                    `;
                    addBotMsg(receiptHTML);
                    saveOrderToStorage(myOrder);
                } 
                else if (text.includes("‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á") || text.includes("COD")) {
                    myOrder.payment = "‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á";
                    chatStep = 0; // ‡∏à‡∏ö‡∏á‡∏≤‡∏ô‡πÄ‡∏•‡∏¢

                    // ‡∏™‡∏∏‡πà‡∏°‡πÄ‡∏•‡∏Ç‡∏û‡∏±‡∏™‡∏î‡∏∏
                    const randomNum = Math.floor(10000000 + Math.random() * 90000000);
                    const trackingNo = `COD${randomNum}TH`;

                    // ‡πÉ‡∏ö‡∏™‡∏£‡∏∏‡∏õ‡∏¢‡∏≠‡∏î (‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á)
                    const receiptHTML = `
                        <div class="receipt-card">
                            <div style="background:#e8f5e9; padding:10px; border-radius:8px; border:1px dashed #198754;">
                                <div>üìÑ <b>‡πÉ‡∏ö‡∏™‡∏£‡∏∏‡∏õ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ (‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á)</b></div>
                                <hr style="margin:5px 0; border:0; border-top:1px dashed #aadeb6;">
                                <div>‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤: ${myOrder.item}</div>
                                <div>‡∏¢‡∏≠‡∏î‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏à‡πà‡∏≤‡∏¢: <b style="color:#198754;">‡∏ø${myOrder.total.toLocaleString()}</b></div>
                                <div style="font-size:12px; color:#666;">‡∏™‡πà‡∏á‡πÑ‡∏õ‡∏ó‡∏µ‡πà: ${myOrder.address}</div>
                            </div>
                            <br>
                            ‚úÖ <b>‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡∏Ñ‡πà‡∏∞!</b><br>
                            üì¶ ‡πÄ‡∏•‡∏Ç‡∏û‡∏±‡∏™‡∏î‡∏∏: <b>${trackingNo}</b><br>
                            üöö ‡∏£‡∏≠‡∏£‡∏±‡∏ö‡∏™‡∏≤‡∏¢‡∏û‡∏µ‡πà‡∏Ç‡∏ô‡∏™‡πà‡∏á 2-3 ‡∏ß‡∏±‡∏ô‡∏ô‡∏∞‡∏Ñ‡∏∞<br>
                            (‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î‡πÑ‡∏ß‡πâ‡∏£‡∏≠‡∏£‡∏±‡∏ö‡∏Ç‡∏≠‡∏á‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‡∏Ñ‡πà‡∏≤ ü•∞)<br>
                            ---------------------------<br>
                            <i>‡∏û‡∏¥‡∏°‡∏û‡πå "‡πÄ‡∏°‡∏ô‡∏π" ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏±‡πà‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‡∏ô‡πâ‡∏≤</i>
                        </div>
                    `;
                    addBotMsg(receiptHTML);
                    saveOrderToStorage(myOrder);
                } else {
                    addBotMsg("‡∏£‡∏ö‡∏Å‡∏ß‡∏ô‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏ô‡πâ‡∏≤ (‡∏û‡∏¥‡∏°‡∏û‡πå '‡πÇ‡∏≠‡∏ô' ‡∏´‡∏£‡∏∑‡∏≠ '‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á' ‡∏Å‡πá‡πÑ‡∏î‡πâ‡∏Ñ‡πà‡∏∞) üòä");
                }
            }
            else if (chatStep === 6) {
                // ‡∏£‡∏≠‡∏£‡∏±‡∏ö‡∏™‡∏•‡∏¥‡∏õ (‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Ñ‡∏ô‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏≠‡∏ô)
                const randomNum = Math.floor(10000000 + Math.random() * 90000000);
                const trackingNo = `SWG${randomNum}TH`;

                const deliveryMsg = `
                    ‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏¢‡∏≠‡∏î‡πÇ‡∏≠‡∏ô‡∏Ñ‡πà‡∏∞! üí∏üíñ<br>
                    ‡∏ó‡∏≤‡∏á‡∏£‡πâ‡∏≤‡∏ô‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏¢‡∏≠‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß‡∏ô‡∏∞‡∏Ñ‡∏∞<br>
                    --------------------------------<br>
                    üì¶ <b>‡πÄ‡∏•‡∏Ç‡∏û‡∏±‡∏™‡∏î‡∏∏:</b> <span style="color:#d63384; font-weight:bold;">${trackingNo}</span><br>
                    üöö <b>‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏™‡πà‡∏á:</b> ‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 2-3 ‡∏ß‡∏±‡∏ô‡∏ó‡∏≥‡∏Å‡∏≤‡∏£<br>
                    --------------------------------<br>
                    ‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡∏≠‡∏∏‡∏î‡∏´‡∏ô‡∏∏‡∏ô SWG Shop ‡∏ô‡∏∞‡∏Ñ‡∏∞ üôè‚ú®<br>
                    <i>(‡∏û‡∏¥‡∏°‡∏û‡πå "‡πÄ‡∏°‡∏ô‡∏π" ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏±‡πà‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‡∏ô‡πâ‡∏≤)</i>
                `;
                addBotMsg(deliveryMsg);
                chatStep = 0; // ‡∏à‡∏ö‡∏á‡∏≤‡∏ô
            }
        }

        // --- 5. ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏ô‡∏ö‡∏™‡∏•‡∏¥‡∏õ ---
        function sendImage() {
            const fileInput = document.getElementById('img-upload');
            const file = fileInput.files[0];
            
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const imgHtml = `<img src="${e.target.result}" style="width:100%; max-width: 200px; border-radius: 10px; border: 2px solid #fff;">`;
                    const chatBox = document.getElementById('chat-box');
                    chatBox.innerHTML += `<div class="message user-msg">${imgHtml}</div>`;
                    scrollToBottom();

                    setTimeout(() => { 
                        // ‡∏ñ‡πâ‡∏≤‡∏≠‡∏¢‡∏π‡πà‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏£‡∏≠‡∏™‡∏•‡∏¥‡∏õ (6) ‡πÉ‡∏´‡πâ‡∏à‡∏ö‡∏á‡∏≤‡∏ô
                        if (chatStep === 6) {
                            processBotLogic("‡πÅ‡∏ô‡∏ö‡∏™‡∏•‡∏¥‡∏õ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏∞");
                        } else {
                            // ‡∏ñ‡πâ‡∏≤‡πÅ‡∏ô‡∏ö‡πÄ‡∏•‡πà‡∏ô‡πÜ ‡πÉ‡∏ô‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏≠‡∏∑‡πà‡∏ô
                            addBotMsg("‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏£‡∏π‡∏õ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏≤ üì∏");
                        }
                    }, 1000);
                };
                reader.readAsDataURL(file);
            }
            fileInput.value = "";
        }

        function saveOrderToStorage(orderData) {
            // ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏™‡πà‡∏á‡πÑ‡∏õ Google Sheets
            let newOrder = {
                date: new Date().toLocaleString('th-TH'),
                item: orderData.item,
                size: orderData.size,
                qty: orderData.qty,
                total: orderData.total,
                payment: orderData.payment,
                address: orderData.address
            };

            // ‚ùå ‡πÄ‡∏≠‡∏≤ URL ‡∏¢‡∏≤‡∏ß‡πÜ ‡∏ó‡∏µ‡πà‡∏Å‡πä‡∏≠‡∏õ‡∏°‡∏≤‡∏à‡∏≤‡∏Å Google Script ‡∏°‡∏≤‡πÉ‡∏™‡πà‡πÉ‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏´‡∏°‡∏≤‡∏¢‡∏Ñ‡∏≥‡∏û‡∏π‡∏î‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡∏ô‡∏µ‡πâ‡∏Ñ‡∏£‡∏±‡∏ö ‚ùå
            const googleSheetURL = "https://script.google.com/macros/s/AKfycbznEz_eMs_m87IXG0jyQZBQG3zs9-LFQ7Ec4RjEXrBIrNT7VCGsStlbb3OnZ7Hdy4TH5g/exec"; 

            // ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡πâ‡∏≤‡∏°‡πÄ‡∏ß‡πá‡∏ö
            fetch(googleSheetURL, {
                method: 'POST',
                mode: 'no-cors', // ‡πÉ‡∏™‡πà‡πÑ‡∏ß‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡πÄ‡∏ß‡πá‡∏ö‡∏ö‡∏•‡πá‡∏≠‡∏Å‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
                headers: {
                    'Content-Type': 'text/plain',
                },
                body: JSON.stringify(newOrder)
            })
            .then(() => {
                console.log("‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Ç‡πâ‡∏≤ Google Sheets ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!");
            })
            .catch((error) => {
                console.error("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î:", error);
            });
        }

        function addBotMsg(html) {
            const chatBox = document.getElementById('chat-box');
            chatBox.innerHTML += `<div class="message bot-msg">${html}</div>`;
            scrollToBottom();
        }
        function addUserMsg(text) {
            const chatBox = document.getElementById('chat-box');
            chatBox.innerHTML += `<div class="message user-msg">${text}</div>`;
            scrollToBottom();
        }
        function scrollToBottom() {
            const chatBox = document.getElementById('chat-box');
            chatBox.scrollTop = chatBox.scrollHeight;
        }
    </script>
</body>
</html>